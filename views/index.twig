{% extends 'layout.twig' %}

{% block body %}
<div class="container">
  <div class="row" style="margin-top: 50px;">
    <div class="jumbotron">
      <h1 class="display-3">BCdatabaser</h1>
      <p class="lead">
        The Reference DB Creator - BCdatabaser - is a pipeline to create reference databases for arbitrary
        markers and taxonomic groups from NCBI data. It can optionally be used to trim and orient the sequences
        and train taxonomic classifiers.
      </p>
      <p>
        This web interface exposes a subset of the parameters of the <a href="https://github.com/molbiodiv/bcdatabaser">command line version</a>.
        Also all databases build here are automatically pushed to zenodo and publicly listed.
        If you want to create large numbers of databases, private databases or use more custom parameters please use the command line version instead.
        Taxonomic range and taxa list are per default checked against NCBI Taxonomy names and 
      </p>
      <hr class="my-4">
      <p>Some information how to use the pipeline</p>
      <p class="lead">
        <a class="btn btn-primary btn-lg" href="https://github.com/molbiodiv/bcdatabaser" role="button">Learn more</a>
        <a class="btn btn-primary btn-lg" href="https://github.com/molbiodiv/bcdatabaser_web" role="button"><i class="fa fa-github"></i></a>
      </p>
      <p id="queue_status" style="display:none">
        There are currently <b id="running_jobs">x</b> jobs running and <b id="pending_jobs">y</b> pending.
      </p>
    </div>
  </div>
  <fieldset>
    <legend>Search String</legend>
    <div class="form-group">
      Presets:
      <a class="btn" id="markerSearchPresetITS2" href="#" role="button">ITS2</a>
      <a class="btn" id="markerSearchPresetRbcL" href="#" role="button">rbcL</a><br>
      First word will be used in output file name, so the commonly used marker abbreviation code is recommended
      <input type="text" class="form-control" id="markerSearchString" placeholder="Search String">
    </div>
    <legend>Taxonomic Range</legend>
    <div class="form-group">
      Only child taxa of this will be considered
      <input type="text" class="form-control" id="taxonomicRange" placeholder="Viridiplantae">
    </div>
    <legend>Taxa List</legend>
    <div class="form-group">
      plain text file, one taxon per line
      <input type="text" class="form-control" id="taxaListDescription" placeholder="US-CA">
      <input type="file" class="form-control-file" id="exampleInputFile" aria-describedby="fileHelp">
    </div>
    <legend>Output name</legend>
    <div class="form-group">
      Recommended Format: marker.taxonomicRange.countryCode.date
      TODO: build from input, show preview
      <input type="text" class="form-control" id="outdir" placeholder="its2.viridiplantae.de.2019-04-01">
    </div>
  </fieldset>
  <div class="row" style="margin-top: 20px;">
    <button type="button" class="btn btn-primary btn-lg" >Execute</button>
  </div>

  <div class="alert alert-success" role="alert" id="your_job_notification" style="display:none">
    <h4 class="alert-heading">Well done!</h4>
    <p>Your job was submitted successfully. It will be processed as soon as possible. Please check back later, it will appear in the results table below.</p>
    <hr>
    <p class="mb-0">To check on the status and to see possible error messages if it does not show up in the results table soon. Your job id is: <a id="your_job" href="#">XYZ</a></p>
  </div>

  <div class="row" id="prevResultPanel" style="margin-top: 20px;">
    <h4 style="text-align: center; padding-top: 5px; color: #ffffff">Previous Results</h4>
    <table class="table table-hover" id="prevResults">
      <thead>
        <tr>
          <th>Time</th>
          <th>Name</th>
          <th>Marker</th>
          <th>Taxon</th>
          <th>doi</th>
          <th>Details</th>
        </tr>
      </thead>
    </table>
  </div>
</div>
{% endblock %}
